% -*- latex -*- This is a LaTeX document.
% $Id: comdef.sty,v 1.14 1999-08-05 19:10:01 cananian Exp $
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Common definitions for Harpoon design documents. %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{comdef}[1999/05/07 v1.0 (C. Scott Ananian)]
\RequirePackage{latexsym}
\RequirePackage{ifthen}
\RequirePackage{xspace}
\RequirePackage[noend]{algorithmic}

% A breaking non-space for URLs
\newcommand{\bp}{\hspace{0pt}}

% put horizontal rules at top and bottom of figure environment
\newenvironment{myfigure}[1][tbp]
	{\begin{figure}[#1]\linespread{1}\hrule\vspace{8pt}}
	{\vspace{8pt}\hrule\end{figure}}
% put horizontal rules at top and bottom of algorithm environment
\newenvironment{myalgorithm}[1][tbp]
	{\begin{algorithm}[#1]\linespread{1}\hrule\vspace{8pt}}
	{\vspace{8pt}\hrule\end{algorithm}}

% vertical centering
\newlength{\vclength}\newsavebox{\vcbox}
\newcommand{\vertcenter}[1]{%
  \savebox{\vcbox}{#1}\settowidth{\vclength}{\usebox{\vcbox}}%
  \parbox[c]{\vclength}{\usebox{\vcbox}}}
% top-alignment
\newlength{\vtlength}\newsavebox{\vtbox}
\newcommand{\topalign}[1]{%
  \savebox{\vtbox}{#1}\settowidth{\vtlength}{\usebox{\vtbox}}%
  \parbox[t]{\vtlength}{\rule{0pt}{0pt}\\\usebox{\vtbox}}}

% environment for code examples
\ifthenelse{\boolean{@compatibility}}{}{% don't define this in 2.09 mode.
\newenvironment{samplecode}[1][1]%
  {\setlength{\tabcolsep}{2\tabcolsep}%
\renewcommand{\>}{~~~~}%
\newcommand{\comment}[1]{\rm\it // ##1}%
\newcommand{\com}[1]{\comment{##1}}%
\newcommand{\ells}[1]{\ifcase#1\or l\or l|l\or l|l|l\or l|l|l|l\or
l|l|l|l|l\or l|l|l|l|l|l\fi}%
\begin{center}\tt\begin{tabular}{\ells{#1}}}
  {\end{tabular}\end{center}}
}
% math abbreviations
\newcommand{\Rho}{P}
\newcommand{\set}[1]{\ensuremath{\left\{#1\right\}}}
\newenvironment{transitions}{
 \newcommand{\isdef}[1]{\ensuremath{##1\:\mbox{defined}}}
 \newcommand{\notdef}[1]{\ensuremath{##1\:\mbox{undefined}}}
% \newcommand{\isdef}[1]{\ensuremath{##1\succ\bot}}
% \newcommand{\notdef}[1]{\ensuremath{##1=\bot}}
 \newcommand{\trule}[2]{\ensuremath{\displaystyle\frac{##1}{##2}}}
 \renewcommand{\arraystretch}{2.5}
 \newcommand{\myarray}[2]{\renewcommand{\arraystretch}{1}\begin{array}{##1}##2\end{array}\renewcommand{\arraystretch}{2.5}}
 \begin{center}\begin{math}\begin{array}{lc}}
{\end{array}\end{math}\end{center}\renewcommand{\arraystretch}{1}}

% Theorem-like environments
\newtheorem{definition}{Definition}[section]
\newtheorem{observation}{Observation}[section]
\newtheorem{property}{Property}[section]
\newtheorem{lemma}{Lemma}[section]
\newtheorem{theorem}{Theorem}[section]

% enumerated environment with no indent
\newcounter{enumnoind}
\newenvironment{enumnoind}
  {\setcounter{enumnoind}{0}
   \begin{list}{\arabic{enumnoind}.}
               {\usecounter{enumnoind} \setlength{\leftmargin}{.4cm}}}
  {\end{list}}

% list environments without so much space between items
\newenvironment{tightdesc}
  {\begin{description}\setlength{\itemsep}{2pt}\setlength{\parskip}{0pt}}
  {\end{description}}
\newenvironment{tightenum}
  {\begin{enumerate}\setlength{\itemsep}{2pt}\setlength{\parskip}{0pt}}
  {\end{enumerate}}

% domain names, properly spaced
\newcommand{\domain}[1]{{\mbox{\em #1}}}
\newcommand{\domainsm}[1]{{\mbox{\scriptsize\em #1}}}

% term names, in definition environments
\newcommand{\newterm}[1]{\textbf{\em #1}}

% uniform format for Stuff Not Yet Done
\newcommand{\fixme}[1]{\footnote{\textbf{FIXME:} #1}}

% phi, sigma, and xi functions
\newcommand{\phifunction}{$\phi$-function\xspace}
\newcommand{\sigfunction}{$\sigma$-function\xspace}
\newcommand{\xifunction}{$\xi$-function\xspace}
\newcommand{\tuple}[1]{\ensuremath{\left\langle #1 \right\rangle}}
\newcommand{\xivec}[2]{\ensuremath{\left[\tuple{#1}\atop\tuple{#2}\right]}}
\newcommand{\phisigfunction}[1][and]{$\phi$- #1 \sigfunction}
\newcommand{\subvar}[2]{\ensuremath{\text{#1}_{\text{#2}}}}

% Cytron's path symbol
\newcommand{\path}{\ensuremath{\rightarrow}}
\newcommand{\pathplus}{\ensuremath{\stackrel{+}{\path}}}

% SSI0/+
\newcommand{\ssizero}{SSI$_{\text{0}}$\xspace}
\newcommand{\ssiplus}{SSI$^{\text{+}}$\xspace}

% typeface for program code
\newcommand{\code}[1]{\texttt{#1}}

% redefine comments for algorithm mode
\renewcommand{\algorithmiccomment}[1]{/* #1 */}
\newcommand{\FOREACH}[1]{\FOR{\textbf{each} #1}}
\newcommand{\LET}{\STATE \textbf{let}\xspace}
\newcommand{\EMPTYLINE}{\vspace{0.6\baselineskip}}
\newcommand{\RETURN}{\STATE \textbf{return}\xspace}

% hyphenation problems
\hyphenation{con-ver-gence da-ta-flow stat-ic Stat-ic}
