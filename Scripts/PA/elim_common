CALL_DIR=`pwd`

cd 
cd Harpoon/Code

cls=$1
name=$2
dir=$3
levels=$4

echo "Analyzing $cls to analyze-$name"

PRE_FILE=${CALL_DIR}/pre-analysis/pre${name}


if test -e $PRE_FILE
then
     PREANALYSIS_OPT=--loadpre=$PRE_FILE
else
     PREANALYSIS_OPT=--savepre=$PRE_FILE
fi


#PA_FILE=pa-${name}

#echo Current directory `pwd`

#if test -e $PA_FILE
#then
#     ANALYSIS_OPT=--loadpa=$PA_FILE
#else
#     ANALYSIS_OPT=--savepa=$PA_FILE
#fi



stdPath=${HARPOON_DIR}/Code/Support/AbstractList.jar:${HARPOON_DIR}/Code/Support/NewThread.jar:${HARPOON_DIR}/Code/Support/sunthunk.jar:${HARPOON_DIR}/Code/Support/collections.jar:${HARPOON_DIR}/Code/classes.zip:.

echo "harpoon.class.path = \""${stdPath}:${dir}"\""

HARPOON_OPTIONS=" -mx512m -oss100m \
		  -Dharpoon.runtime=2 \
    	          -Dharpoon.alloc.strategy=niftystats \
    	          -Dharpoon.target.elf=yes \
                  -Dharpoon.class.path=$stdPath:$dir"


