#!/bin/sh

CALL_DIR=`pwd`

cd 
cd Harpoon/Code

cls=$1
name=$2
dir=$3
levels=$4

BUILD_OUT_DIR=${CALL_DIR}/${name}.Inter

rm -rf ${BUILD_OUT_DIR} 
mkdir ${BUILD_OUT_DIR}


export stdPath=./Support/EventDriven1.jar:./Support/sunthunk.jar:./Support/collections.jar:./classes.zip:.

java -mx128m -oss100m \
    -Dharpoon.alloc.strategy=bdw \
    -Dharpoon.target.elf=yes \
    -Dharpoon.class.path=$stdPath:$dir \
harpoon.Main.SAMain \
    -H -c $cls -bstrongarm -o ${BUILD_OUT_DIR}

exit $?
