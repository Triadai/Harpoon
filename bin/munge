#!/bin/sh
# concatanate files to stdout in a form that we can unmunge them from.
# Basically, a text-file-only form of tar.
for dir in $@; do
  # filter out CVS directorys, backup files, and some obvious binary formats.
  files=`find $dir -name CVS -prune -o ! -name "*~" ! -name "*.class" ! -name "*.gif" -print`
  for f in $files; do
    if [ -f $f ]; then
	echo "---- CUT HERE ----"
        echo $f
	# old way: sed -e "s/^-/- /" < $f
	# new way makes sure every line ends in a newline.
	perl -ne 'chomp;s/^-/- /;print $_ . "\n";' < $f
    fi
  done
done
