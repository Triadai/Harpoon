To build FLEX with FLEX, the first thing you must do is make sure
the .class binaries are linked against a 1.1 JDK -- there are some
methods (StringBuffer.append(StringBuffer), for example, used in
TreeToC method 'flushAndAppend' among other places) which were
added after JDK1.1.  References to these post-1.1 methods should
not be present in your class binaries:


$ make clean
$ export OLDCP="$CLASSPATH"
$ export CLASSPATH=.:SupportNP/collections.jar:SupportNP/classes.zip
$ make jikes
$ export CLASSPATH="$OLDCP"

You must use the proper root set for SAMain:

$ bin/build-precisec -r Support/samain-root-set harpoon.Main.SAMain SAMAIN

The compilation of the C source files generated by FLEX's precisec
backend uses quite a lot ( > 64M ) of space in /tmp (or /usr/tmp).
Set the environment variable TMPDIR to point to somewhere where you've
got plenty of space free, if /tmp is crowded:

$ TMPDIR=/var/tmp bin/build-precisec -r Support/samain-root-set harpoon.Main.SAMain SAMAIN

[one more time:]
The command *I* actually use to build FLEX is:

$ KEEP_ARCHIVE=1 TMPDIR=/var/tmp MAKEOPT=-j2 bin/build-precisec -Dharpoon.precisec.emit_line_directives=true -r Support/samain-root-set harpoon.Main.SAMain SAMAIN

Executing this binary:
 - to suppress "security properties not found.  using defaults." message
   on System.err, define JAVA_HOME in the environment, such that
   JAVA_HOME/lib/security/java.security contains a java securities file.
   For example:
    JAVA_HOME=/usr/java/j2sdk1.4.0/jre [...command here...]

-----------------------
You can also build the quad interpreter, for an executable which is
basically a very-slow java VM:

$ KEEP_ARCHIVE=1 TMPDIR=/var/tmp MAKEOPT=-j2 bin/build-precisec -Dharpoon.precisec.emit_line_directives=true -r Support/samain-root-set harpoon.Main.Run INTERPRET 2>&1 | tee blahH
